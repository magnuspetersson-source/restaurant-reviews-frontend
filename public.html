<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Restaurant Reviews</title>

  <link rel="stylesheet" href="./css/public.css" />

  <!-- OPTIONAL: config injection (Squarespace code block / header injection) -->
  <script>
    window.RR_CONFIG = window.RR_CONFIG || {
      apiBase: "https://restaurant-reviews-backend-xi.vercel.app", // om frontend inte ligger på samma origin
      googleMapsApiKey: "AIzaSyDvkuMeVZtWDnIRvaR21_AO_7uB5Pendug"
    };
  </script>
</head>

<body>
  <div class="app" id="app">
    <header class="topbar">
      <div class="topbar__left">
        <div class="brand">
          <div class="brand__title">Restaurant Reviews</div>
          <div class="brand__sub" id="resultsMeta">Laddar…</div>
        </div>
      </div>

      <div class="topbar__right">
        <div class="controls">
          <select id="sortSelect" class="control">
            <option value="latest">Sortera: Senaste</option>
            <option value="rating_desc">Sortera: Högst betyg</option>
            <option value="value_desc">Sortera: Bäst value</option>
            <option value="distance_asc">Sortera: Närmast</option>
          </select>

          <select id="typeSelect" class="control">
            <option value="">Typ: Alla</option>
          </select>

          <select id="priceSelect" class="control">
            <option value="">Pris: Alla</option>
            <option value="1">$</option>
            <option value="2">$$</option>
            <option value="3">$$$</option>
            <option value="4">$$$$</option>
            <option value="5">$$$$$</option>
          </select>

          <select id="minRatingSelect" class="control">
            <option value="">Betyg: Alla</option>
            <option value="5">★★★★★</option>
            <option value="4">★★★★+ </option>
            <option value="3">★★★+ </option>
            <option value="2">★★+ </option>
            <option value="1">★+ </option>
          </select>
        </div>

        <div class="mobileToggle" id="mobileToggle">
          <button class="toggleBtn is-active" data-mode="list">Lista</button>
          <button class="toggleBtn" data-mode="map">Karta</button>
        </div>
      </div>
    </header>

    <main class="main">
      <section class="col col--list" id="colList" aria-label="Lista">
        <div class="status" id="statusArea" hidden></div>
        <div class="list" id="reviewList" aria-label="Recensioner"></div>
      </section>

      <section class="col col--map" id="colMap" aria-label="Karta">
        <div class="map" id="map"></div>
        <div class="mapHint" id="mapHint" hidden></div>
      </section>

      <aside class="panel" id="reviewPanel" aria-label="Detaljer" aria-hidden="true">
        <div class="panel__header">
          <button class="iconBtn" id="panelCloseBtn" aria-label="Stäng">✕</button>
          <div class="panel__title" id="panelTitle"></div>
          <div class="panel__meta" id="panelMeta"></div>
        </div>

        <div class="panel__body">
          <div class="gallery" id="panelGallery"></div>
          <div class="content" id="panelContent"></div>

          <div class="comments">
            <div class="comments__header">
              <div class="comments__title">Kommentarer</div>
              <div class="comments__disclaimer">
                Kommentarer är användargenererade och har inte granskats.
              </div>
            </div>

            <div class="comments__list" id="commentsList"></div>

            <form class="commentForm" id="commentForm">
              <div class="row">
                <label class="field">
                  <span>Namn</span>
                  <input type="text" id="commentName" required maxlength="80" />
                </label>
                <label class="field">
                  <span>Email (valfritt)</span>
                  <input type="email" id="commentEmail" maxlength="120" />
                </label>
              </div>

              <label class="field">
                <span>Kommentar</span>
                <textarea id="commentBody" required maxlength="2000"></textarea>
              </label>

              <div class="commentForm__actions">
                <button type="submit" class="btn" id="commentSubmitBtn">Skicka</button>
                <div class="formNote" id="commentNote"></div>
              </div>
            </form>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Slideshow Modal -->
  <div class="modal" id="slideshowModal" aria-hidden="true">
    <div class="modal__overlay" id="modalOverlay"></div>
    <div class="modal__dialog" role="dialog" aria-modal="true" aria-label="Bildspel">
      <button class="iconBtn modal__close" id="modalCloseBtn" aria-label="Stäng">✕</button>

      <div class="modal__media">
        <button class="navBtn" id="modalPrevBtn" aria-label="Föregående">‹</button>
        <img id="modalImage" alt="" />
        <button class="navBtn" id="modalNextBtn" aria-label="Nästa">›</button>
      </div>

      <div class="modal__caption" id="modalCaption"></div>
      <div class="modal__counter" id="modalCounter"></div>
    </div>
  </div>

  <!-- JS -->
  <script src="./js/config.js" defer></script>
  <script src="./js/utils/dom.js" defer></script>
  <script src="./js/utils/format.js" defer></script>
  <script src="./js/utils/sanitize.js" defer></script>
  <script src="./js/api.js" defer></script>
  <script src="./js/router.js" defer></script>
  <script src="./js/state.js" defer></script>
  <script src="./js/map/map.js" defer></script>
  <script src="./js/map/markers.js" defer></script>
  <script src="./js/ui/list.js" defer></script>
  <script src="./js/ui/panel.js" defer></script>
  <script src="./js/ui/comments.js" defer></script>
  <script src="./js/ui/slideshowModal.js" defer></script>
  <script src="./js/app.js" defer></script>
</body>
</html>